
\immediate\write18{tex maths-font-mappings.dtx}
\immediate\write18{sh maths-map.sh}

\IfFileExists{math-italic.tec}{}{%
  \GenericError{}{*** Turn on shell escape ***}{}{}
}

\documentclass[10pt]{article}
\usepackage[EU1]{fontenc}
\usepackage{lmodern}

\newcommand\STIXfont{[xits-math.otf]:script=math;}
\newcommand\newSTIX[2]{%
  \DeclareFontFamily{EU1}{#1}{}%
  \DeclareFontShape{EU1}{#1}{m}{n}
    {<-6>"\STIXfont;color=AA0000;+ssty=1;#2"<6-9>"\STIXfont;color=00AA00;+ssty=0;#2"<9->"\STIXfont;#2"}{}%
}
\newSTIX{STIXmit}{mapping=math-italic}
\newSTIX{STIXmup}{}
\newSTIX{STIXmsfup}{mapping=math-sans}
\DeclareSymbolFont{operators}{EU1}{STIXmup}{m}{n}
\DeclareSymbolFont{letters}{EU1}{STIXmit}{m}{n}
\DeclareSymbolFont{symbols}{EU1}{STIXmit}{m}{n}
\DeclareSymbolFont{largesymbols}{EU1}{STIXmit}{m}{n}
\DeclareMathAlphabet{\mathsf}{EU1}{STIXmsfup}{m}{n}

% need to fix all the NFSS math assignments:
\DeclareMathSymbol{\omega}{\mathord}{letters}{"1D714}

\begin{document}

\[
  F(\omega) = \int_{-\infty}^{\infty} e^{-i\omega t} f(t) \mathrm{d} t
\]
\[
  \sqrt{\sin^2(\Theta) + \cos^2(\Theta)} = 1
\]
\[
 abc_{abc_{abc}}+\mathsf{abc_{abc_{abc}}}
\]

\end{document}

