
\immediate\write18{tex maths-font-mappings.dtx}
\immediate\write18{sh maths-map.sh}

\IfFileExists{math-italic.tec}{}{%
  \GenericError{}{*** Turn on shell escape ***}{}{}
}

\documentclass[10pt]{article}
\usepackage[EU1]{fontenc}
\usepackage{lmodern}

\newcommand\STIXfont{[xits-math.otf]:script=math;}
\newcommand\newSTIX[2]{%
  \DeclareFontFamily{EU1}{#1}{}%
  \DeclareFontShape{EU1}{#1}{m}{n}
    {<-6>"\STIXfont;color=AA0000;+ssty=1;#2"<6-9>"\STIXfont;color=00AA00;+ssty=0;#2"<9->"\STIXfont;#2"}{}%
}
\newSTIX{STIXmit}{mapping=math-italic}
\newSTIX{STIXmup}{}
\newSTIX{STIXmsfup}{mapping=math-sans}
\DeclareSymbolFont{operators}{EU1}{STIXmup}{m}{n}
\DeclareSymbolFont{letters}{EU1}{STIXmit}{m}{n}
\DeclareSymbolFont{symbols}{EU1}{STIXmit}{m}{n}
\DeclareSymbolFont{largesymbols}{EU1}{STIXmit}{m}{n}
\DeclareMathAlphabet{\mathsf}{EU1}{STIXmsfup}{m}{n}

% need to fix all the NFSS math assignments:

\makeatletter
\def\set@mathchar#1#2#3#4{%  \global\Umathcode'#2="\mathchar@type#3 #1 #4\relax}

\def\set@mathsymbol#1#2#3#4{%
  \global\Umathchardef#2 "\mathchar@type#3 #1 #4\relax}

\def\DeclareMathSymbol#1#2#3#4{%  \expandafter\in@\csname sym#3\expandafter\endcsname     \expandafter{\group@list}%  \ifin@    \begingroup      \if\relax\noexpand#1% is command?        \edef\reserved@a{\noexpand\in@{\string\mathchar}{\meaning#1}}%        \reserved@a        \ifin@          \expandafter\set@mathsymbol             \csname sym#3\endcsname{#1}{#2}{#4}%          \@font@info{Redeclaring math symbol \string#1}%        \else            \expandafter\ifx            \csname\expandafter\@gobble\string#1\endcsname            \relax            \expandafter\set@mathsymbol               \csname sym#3\endcsname{#1}{#2}{#4}%          \else            \@latex@error{Command ‘\string#1’ already defined}\@eha          \fi\fi \else        \expandafter\set@mathchar          \csname sym#3\endcsname{#1}{#2}{#4}%      \fi    \endgroup  \else    \@latex@error{Symbol font ‘#3’ is not defined}\@eha\fi 
}
\makeatother

\DeclareMathSymbol{\omega}{\mathord}{letters}{"1D714}

\begin{document}

\[
  F(\omega) = \int_{-\infty}^{\infty} e^{-i\omega t} f(t) \mathrm{d} t
\]
\[
  \sqrt{\sin^2(\Theta) + \cos^2(\Theta)} = 1
\]
\[
 abc_{abc_{abc}}+\mathsf{abc_{abc_{abc}}}
\]

\end{document}

